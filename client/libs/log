function init(dir)
	if not fs.isDir(dir) then
		fs.makeDir(dir)
	end
	if not logfile then
		logfile = assert(fs.open(dir.."client-latest"..".log", "w"))
	end
end

function shutdown()
	if logfile then
		logfile.close()
	end
end

function logRaw(level, msg)
	local prefix = ""
	prefix = prefix .. "- "
	local padding = "\n".."  "
	local toPrint = prefix .. msg:gsub("\n", padding)
	if logfile then
		logfile.writeLine(toPrint)
		logfile.flush()
	end
	print(toPrint)
end

function debug(msg)
	--logRaw("DEBUG", msg)
end

function info(msg)
	logRaw("INFO", msg)
end

function warn(msg)
	logRaw("WARN", msg)
end

function error(msg)
	logRaw("ERROR", msg)
end

function fatal(msg)
	logRaw("$$ FATAL $$", msg)
end